{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nexport default {\n  name: \"AppUpload\",\n  data() {\n    return {\n      Vwallpaper: {\n        // 额外的参数\n        vwpId: '',\n        name: null,\n        createId: '',\n        price: '',\n        type: '',\n        path: ''\n        // ...\n      },\n\n      NAME: '',\n      BALANCE: '',\n      USERID: '',\n      PASSWORD: '',\n      imageUrl: '',\n      tname: null,\n      tprice: '',\n      ttype: '风景'\n    };\n  },\n  mounted() {\n    // 在组件加载时自动执行的函数\n    this.NAME = sessionStorage.getItem('NAME');\n    this.USERID = sessionStorage.getItem('USERID');\n    this.BALANCE = sessionStorage.getItem('BALANCE');\n    this.PASSWORD = sessionStorage.getItem('PASSWORD');\n    console.log(this.NAME);\n    console.log(this.USERID);\n    console.log(this.PASSWORD);\n    console.log(this.BALANCE);\n  },\n  methods: {\n    toindex() {\n      this.$router.push(\"/index\");\n    },\n    touser() {\n      this.$router.push(\"/user\");\n    },\n    refresh() {\n      location.reload();\n    },\n    toupload() {\n      this.$router.push(\"/upload\");\n    },\n    Upload() {\n      this.Vwallpaper.name = this.tname;\n      this.Vwallpaper.createId = this.USERID;\n      this.Vwallpaper.price = this.tprice;\n      this.Vwallpaper.type = this.ttype;\n      if (this.tname == null) {\n        alert(\"上传失败！图片名不能为空，请输入图片名\");\n        location.reload();\n        return;\n      }\n      if (this.tprice == null) {\n        alert(\"上传失败！价格不能为空，请输入价格，免费分享请输入0\");\n        location.reload();\n      }\n      console.log(this.Vwallpaper);\n      this.$refs.upload.submit();\n    },\n    handleFileChange(file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    handleAvatarSuccess(response) {\n      // this.imageUrl = URL.createObjectURL(file.raw);\n      console.log(response);\n      console.log(response.data);\n      let result = response;\n      if (result.code === 200) {\n        alert(\"上传成功！\");\n        location.reload();\n      }\n      if (result.code === 400) {\n        alert(\"上传失败！价格不能为空，请输入价格，免费分享请输入0\");\n        location.reload();\n      }\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      // if (!isJPG) {\n      //   this.$message.error('上传头像图片只能是 JPG 格式!');\n      // }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return true;\n    }\n  }\n};","map":{"version":3,"names":["name","data","Vwallpaper","vwpId","createId","price","type","path","NAME","BALANCE","USERID","PASSWORD","imageUrl","tname","tprice","ttype","mounted","sessionStorage","getItem","console","log","methods","toindex","$router","push","touser","refresh","location","reload","toupload","Upload","alert","$refs","upload","submit","handleFileChange","file","URL","createObjectURL","raw","handleAvatarSuccess","response","result","code","beforeAvatarUpload","isJPG","isLt2M","size","$message","error"],"sources":["src/components/AppUpload.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <div class=\"header\">\r\n            <div class=\"logo\">壁纸引擎</div>\r\n            <div class=\"nav\">\r\n                <button @click=\"toindex\">首页</button>\r\n                <button>分类</button>\r\n                <button @click=\"refresh\">上传</button>\r\n                <div class=\"userimgbox\">\r\n                    <img src=\"../assets/tou1.jpg\" alt=\"\" width=\"25\" @click=\"touser\">\r\n                    <div>{{ this.NAME }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"form\">\r\n          <el-upload class=\"avatar-uploader\" action=\"http://localhost:8090/vwallpaper/upload\" :show-file-list=\"false\"\r\n                     :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\" :on-change=\"handleFileChange\"\r\n                     :data=\"Vwallpaper\" :auto-upload=\"false\" ref=\"upload\">\r\n            <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n            <input type=\"text\" placeholder=\"输入图片名称...\" v-model=\"tname\">\r\n            <input type=\"text\" placeholder=\"输入图片价格￥(输入0即为免费分享)...\" v-model=\"tprice\">\r\n            <div class=\"chosebox\">请选择图片类型...</div>\r\n            <el-radio-group v-model=\"ttype\">\r\n              <el-radio-button label=\"风景\"></el-radio-button>\r\n              <el-radio-button label=\"动物\"></el-radio-button>\r\n              <el-radio-button label=\"美女\"></el-radio-button>\r\n              <el-radio-button label=\"动漫\"></el-radio-button>\r\n              <el-radio-button label=\"游戏\"></el-radio-button>\r\n              <el-radio-button label=\"电影\"></el-radio-button>\r\n              <el-radio-button label=\"明星\"></el-radio-button>\r\n              <el-radio-button label=\"科幻\"></el-radio-button>\r\n              <el-radio-button label=\"其他\"></el-radio-button>\r\n            </el-radio-group>\r\n            <el-button @click=\"Upload\">上传</el-button>\r\n        </div>\r\n        <div class=\"footer\">\r\n            <p>© 2023 壁纸引擎. All rights reserved.</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n    name: \"AppUpload\",\r\n    data() {\r\n        return {\r\n          Vwallpaper: {\r\n            // 额外的参数\r\n            vwpId: '',\r\n            name: null,\r\n            createId: '',\r\n            price: '',\r\n            type: '',\r\n            path: ''\r\n            // ...\r\n          },\r\n            NAME:'',\r\n            BALANCE:'',\r\n            USERID:'',\r\n            PASSWORD:'',\r\n            imageUrl: '',\r\n            tname: null,\r\n            tprice: '',\r\n            ttype: '风景',\r\n        };\r\n    },\r\n    mounted() {\r\n      // 在组件加载时自动执行的函数\r\n      this.NAME=sessionStorage.getItem('NAME')\r\n      this.USERID=sessionStorage.getItem('USERID')\r\n      this.BALANCE=sessionStorage.getItem('BALANCE')\r\n      this.PASSWORD=sessionStorage.getItem('PASSWORD')\r\n      console.log(this.NAME)\r\n      console.log(this.USERID)\r\n      console.log(this.PASSWORD)\r\n      console.log(this.BALANCE)\r\n    },\r\n    methods: {\r\n        toindex() {\r\n            this.$router.push(\"/index\");\r\n        },\r\n        touser() {\r\n            this.$router.push(\"/user\");\r\n        },\r\n        refresh() {\r\n            location.reload();\r\n        },\r\n        toupload() {\r\n            this.$router.push(\"/upload\");\r\n        },\r\n        Upload() {\r\n          this.Vwallpaper.name=this.tname;\r\n          this.Vwallpaper.createId=this.USERID;\r\n          this.Vwallpaper.price=this.tprice;\r\n          this.Vwallpaper.type= this.ttype;\r\n          if(this.tname==null)\r\n          {\r\n            alert(\"上传失败！图片名不能为空，请输入图片名\")\r\n            location.reload();\r\n            return;\r\n          }\r\n          if(this.tprice==null)\r\n          {\r\n            alert(\"上传失败！价格不能为空，请输入价格，免费分享请输入0\");\r\n            location.reload();\r\n          }\r\n          console.log(this.Vwallpaper);\r\n          this.$refs.upload.submit();\r\n        },\r\n        handleFileChange(file) {\r\n          this.imageUrl = URL.createObjectURL(file.raw);\r\n        },\r\n        handleAvatarSuccess(response) {\r\n          // this.imageUrl = URL.createObjectURL(file.raw);\r\n          console.log(response);\r\n          console.log(response.data);\r\n          let result=response;\r\n          if(result.code === 200)\r\n          {\r\n            alert(\"上传成功！\")\r\n            location.reload();\r\n          }\r\n          if(result.code === 400) {\r\n            alert(\"上传失败！价格不能为空，请输入价格，免费分享请输入0\")\r\n            location.reload();\r\n          }\r\n        },\r\n        beforeAvatarUpload(file) {\r\n          const isJPG = file.type === 'image/jpeg';\r\n          const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n          // if (!isJPG) {\r\n          //   this.$message.error('上传头像图片只能是 JPG 格式!');\r\n          // }\r\n          if (!isLt2M) {\r\n            this.$message.error('上传头像图片大小不能超过 2MB!');\r\n          }\r\n          return true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n.chosebox {\r\n  width: 350px;\r\n  height: 50px;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.5);\r\n  /* 在盒子的顶部添加一个1像素宽的边框，颜色为白色，透明度为50%。 */\r\n  border-left: 1px solid rgba(255, 255, 255, 0.5);\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.3);\r\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\r\n  backdrop-filter: blur(20px);\r\n  /* 对盒子应用一个模糊半透明的效果，模糊半径为10像素。这样可以创建玻璃模糊的效果，模糊盒子后面的内容。 */\r\n  background: rgba(50, 50, 50, 0.2);\r\n  /* 设置盒子的背景颜色为半透明的深灰色（RGB值为50, 50, 50），透明度为20%。 */\r\n  display: flex;\r\n  /* 设置盒子使用Flexbox布局。 */\r\n  flex-direction: column;\r\n  /* 将Flex容器的主轴方向设置为垂直，使得项目在列方向上排列。 */\r\n  justify-content: center;\r\n  /*  在盒子的垂直方向上居中内容。 */\r\n  align-items: center;\r\n  /* 在盒子的水平方向上居中内容。 */\r\n  border-radius: 10px;\r\n  /* 应用一个10像素的圆角，使得盒子的角变得圆滑。 */\r\n  margin-top: 10px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.container {\r\n    width: 80%;\r\n    margin: 0 auto;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px;\r\n}\r\n\r\n.logo {\r\n    font-size: 32px;\r\n    font-weight: bold;\r\n    color: #333333;\r\n}\r\n\r\n.nav {\r\n    display: flex;\r\n    gap: 20px;\r\n}\r\n\r\n.nav img:hover {\r\n    cursor: pointer;\r\n}\r\n\r\n.nav button {\r\n    text-decoration: none;\r\n    color: #333333;\r\n    font-size: 16px;\r\n    border: none;\r\n    background-color: rgba(255, 255, 255, 0);\r\n}\r\n\r\n.nav button:hover {\r\n    color: #0099ff;\r\n    cursor: pointer;\r\n}\r\n\r\n.form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 20px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.form input {\r\n    width: 60%;\r\n    height: 40px;\r\n    border: 1px solid #cccccc;\r\n    border-radius: 20px;\r\n    padding: 10px;\r\n    font-size: 16px;\r\n}\r\n\r\n.form button {\r\n    width: 100px;\r\n    height: 40px;\r\n    border: none;\r\n    border-radius: 20px;\r\n    background-color: #0099ff;\r\n    color: white;\r\n    font-size: 16px;\r\n}\r\n\r\n.form button:hover {\r\n    background-color: #0066cc;\r\n    cursor: pointer;\r\n}\r\n\r\n.footer {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 20px;\r\n}\r\n\r\n.footer p {\r\n    font-size: 14px;\r\n    color: #999999;\r\n}\r\n\r\n.userimgbox {\r\n    margin-top: 20px;\r\n}</style>"],"mappings":";;;;AA8CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;QACA;QACAC,KAAA;QACAH,IAAA;QACAI,QAAA;QACAC,KAAA;QACAC,IAAA;QACAC,IAAA;QACA;MACA;;MACAC,IAAA;MACAC,OAAA;MACAC,MAAA;MACAC,QAAA;MACAC,QAAA;MACAC,KAAA;MACAC,MAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,KAAAR,IAAA,GAAAS,cAAA,CAAAC,OAAA;IACA,KAAAR,MAAA,GAAAO,cAAA,CAAAC,OAAA;IACA,KAAAT,OAAA,GAAAQ,cAAA,CAAAC,OAAA;IACA,KAAAP,QAAA,GAAAM,cAAA,CAAAC,OAAA;IACAC,OAAA,CAAAC,GAAA,MAAAZ,IAAA;IACAW,OAAA,CAAAC,GAAA,MAAAV,MAAA;IACAS,OAAA,CAAAC,GAAA,MAAAT,QAAA;IACAQ,OAAA,CAAAC,GAAA,MAAAX,OAAA;EACA;EACAY,OAAA;IACAC,QAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,OAAA;MACA,KAAAF,OAAA,CAAAC,IAAA;IACA;IACAE,QAAA;MACAC,QAAA,CAAAC,MAAA;IACA;IACAC,SAAA;MACA,KAAAN,OAAA,CAAAC,IAAA;IACA;IACAM,OAAA;MACA,KAAA5B,UAAA,CAAAF,IAAA,QAAAa,KAAA;MACA,KAAAX,UAAA,CAAAE,QAAA,QAAAM,MAAA;MACA,KAAAR,UAAA,CAAAG,KAAA,QAAAS,MAAA;MACA,KAAAZ,UAAA,CAAAI,IAAA,QAAAS,KAAA;MACA,SAAAF,KAAA,UACA;QACAkB,KAAA;QACAJ,QAAA,CAAAC,MAAA;QACA;MACA;MACA,SAAAd,MAAA,UACA;QACAiB,KAAA;QACAJ,QAAA,CAAAC,MAAA;MACA;MACAT,OAAA,CAAAC,GAAA,MAAAlB,UAAA;MACA,KAAA8B,KAAA,CAAAC,MAAA,CAAAC,MAAA;IACA;IACAC,iBAAAC,IAAA;MACA,KAAAxB,QAAA,GAAAyB,GAAA,CAAAC,eAAA,CAAAF,IAAA,CAAAG,GAAA;IACA;IACAC,oBAAAC,QAAA;MACA;MACAtB,OAAA,CAAAC,GAAA,CAAAqB,QAAA;MACAtB,OAAA,CAAAC,GAAA,CAAAqB,QAAA,CAAAxC,IAAA;MACA,IAAAyC,MAAA,GAAAD,QAAA;MACA,IAAAC,MAAA,CAAAC,IAAA,UACA;QACAZ,KAAA;QACAJ,QAAA,CAAAC,MAAA;MACA;MACA,IAAAc,MAAA,CAAAC,IAAA;QACAZ,KAAA;QACAJ,QAAA,CAAAC,MAAA;MACA;IACA;IACAgB,mBAAAR,IAAA;MACA,MAAAS,KAAA,GAAAT,IAAA,CAAA9B,IAAA;MACA,MAAAwC,MAAA,GAAAV,IAAA,CAAAW,IAAA;;MAEA;MACA;MACA;MACA,KAAAD,MAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;MACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}